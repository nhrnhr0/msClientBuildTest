import{u as r,g,S as h,L as p,G as S,e as T,f as y,h as b}from"./cookies-d7879264.js";import{a7 as l}from"./vendor-ab4be69b.js";let i={};function v(t){let e={logs:t,uid:f()};return s(p,{method:"POST",body:JSON.stringify(e)})}function s(t,e,o,a=!1){console.log("fetch_wraper: ",t);let c={"Content-Type":"application/json","Content-Type":"application/json; charset=UTF-8"};e&&e.method=="POST"&&(c["X-CSRFToken"]=g("csrftoken")),l(r).access&&(c.Authorization="Token "+l(r).access);var m=new Headers(c);e=Object.assign({},{method:"GET",mode:"cors",credentials:"include",headers:m,redirect:"follow"},e);let d;try{d=o?o(t,e):fetch(t,e)}catch(n){console.error(n)}return d.then(n=>{if(n.status==401){let u=l(r);if(u.isLogin=!1,u.access=null,r.set(u),!a)return s(t,e,o,!0)}return console.log(t," ==> ",n.status),n.json()}).then(n=>n)}function k(t){return s(T+"?q="+encodeURIComponent(t))}function w(t,e){if(i[t])return i[t];{let o=s(h+"/_get_album_images/"+t,{method:"GET"},e);return i[t]=o,i[t]}}async function C(){let t=f(),e="/";t&&(e+=t);let o=await s(S+e);var a;a=o.uid,localStorage.setItem("uuid",a)}function f(){return localStorage.getItem("uuid")}function P(t){var e={method:"POST",body:JSON.stringify(t)};let o;return o=s(y,e),o}function _(t){var e={method:"POST",body:JSON.stringify(t)};let o;return o=s(b,e),o}export{k as a,v as b,f as c,_ as d,s as f,w as g,C as r,P as s};
