import{u as s,k as g,m as h,L as p,n as y,G as S,o as T,q as b,S as O}from"./cookies-43b1ac48.js";import{az as l}from"./vendor-c667ba6d.js";let c={};function v(e){let t={logs:e,uid:f()};return o(p,{method:"POST",body:JSON.stringify(t)})}function o(e,t,n,a=!1){console.log("fetch_wraper: ",e);let i={"Content-Type":"application/json","Content-Type":"application/json; charset=UTF-8"};t&&t.method=="POST"&&(i["X-CSRFToken"]=g("csrftoken")),l(s).access&&(i.Authorization="Token "+l(s).access);var m=new Headers(i);t=Object.assign({},{method:"GET",mode:"cors",credentials:"include",headers:m,redirect:"follow"},t);let d;try{d=n?n(e,t):fetch(e,t)}catch(r){console.error(r)}return d.then(r=>{if(r.status==401){let u=l(s);if(u.isLogin=!1,u.access=null,s.set(u),!a)return o(e,t,n,!0)}return console.log(e," ==> ",r.status),r.json()}).then(r=>r)}function w(e){return o(T+"?q="+encodeURIComponent(e))}function C(e,t){if(c[e])return c[e];{let n=o(h+"/_get_album_images/"+e,{method:"GET"},t);return c[e]=n,c[e]}}async function P(){let e=f(),t="/";e&&(t+=e);let n=await o(S+t);var a;return a=n.uid,localStorage.setItem("uuid",a),n}function f(){return localStorage.getItem("uuid")}function _(e){var t={method:"POST",body:JSON.stringify(e)};let n;return n=o(O,t),n}function G(e){var t={method:"POST",body:JSON.stringify(e)};let n;return n=o(b,t),n}async function I(){return await o(y)}export{w as a,C as b,v as c,G as d,I as e,o as f,f as g,P as r,_ as s};
