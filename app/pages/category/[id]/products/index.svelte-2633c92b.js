import{a7 as d,S,i as _,s as v,e as w,t as h,c as x,a as C,g as p,d as f,b as m,f as g,E as T,h as P,l as j,M as k,_ as A}from"../../../../chunks/vendor-5456ee1f.js";import{u as i,g as F,S as G}from"../../../../chunks/cookies-515d6a48.js";import{i as O}from"../../../../chunks/utils-6e4fb32a.js";let l={};function b(c,t,o,s=!1){let e={"Content-Type":"application/json","Content-Type":"application/json; charset=UTF-8"};t&&t.method=="POST"&&(e["X-CSRFToken"]=F("csrftoken")),d(i).access&&(e.Authorization="Token "+d(i).access);var n=new Headers(e);t=Object.assign({},{method:"GET",mode:"cors",credentials:"include",headers:n,redirect:"follow"},t);let r;try{r=o?o(c,t):fetch(c,t)}catch(a){console.error(a)}return r.then(a=>{if(a.status==401){let u=d(i);if(u.isLogin=!1,u.access=null,i.set(u),!s)return b(c,t,o,!0)}return console.log(c," ==> ",a.status),a.json()}).then(a=>a)}function y(c,t,o){const s=c.slice();return s[1]=t[o],s}function E(c){let t,o,s,e,n=c[1].id+"";return{c(){t=w("a"),o=h("Product "),s=h(n),this.h()},l(r){t=x(r,"A",{href:!0});var a=C(t);o=p(a,"Product "),s=p(a,n),a.forEach(f),this.h()},h(){m(t,"href",e="./products/"+c[1].id+"/")},m(r,a){g(r,t,a),T(t,o),T(t,s)},p(r,a){1&a&&n!==(n=r[1].id+"")&&P(s,n),1&a&&e!==(e="./products/"+r[1].id+"/")&&m(t,"href",e)},d(r){r&&f(t)}}}function $(c){let t,o=c[0],s=[];for(let e=0;e<o.length;e+=1)s[e]=E(y(c,o,e));return{c(){for(let e=0;e<s.length;e+=1)s[e].c();t=j()},l(e){for(let n=0;n<s.length;n+=1)s[n].l(e);t=j()},m(e,n){for(let r=0;r<s.length;r+=1)s[r].m(e,n);g(e,t,n)},p(e,[n]){if(1&n){let r;for(o=e[0],r=0;r<o.length;r+=1){const a=y(e,o,r);s[r]?s[r].p(a,n):(s[r]=E(a),s[r].c(),s[r].m(t.parentNode,t))}for(;r<s.length;r+=1)s[r].d(1);s.length=o.length}},i:k,o:k,d(e){A(s,e),e&&f(t)}}}async function N({page:c,fetch:t,session:o,contex:s}){if(O(c.params.id))return{props:{products:await function(e,n){if(l[e])return l[e];{let r=b(G+"/_get_album_images/"+e,{method:"GET"},n);return l[e]=r,l[e]}}(c.params.id,t)}}}function z(c,t,o){let{products:s}=t;return c.$$set=e=>{"products"in e&&o(0,s=e.products)},[s]}class R extends S{constructor(t){super(),_(this,t,z,$,v,{products:0})}}export{R as default,N as load};
